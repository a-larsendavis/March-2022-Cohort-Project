<%- include("partials/header.ejs") %>
<%- include("partials/navbar.ejs") %>
<span class="pageTitle">Neighborhood Thread </span>

<a href="/neighborhoodPost">Post It!</a>

<div class="page_container">

    <div class="row">

        <!-- check to see if any posts are available ? show message  -->

        <!-- Dummy data -->
        <%# allPosts = [{"zipcode": "12345","bgColor":"6D929B","postit":"A new post from me!","img":"","likes":[],"createdAt" : "2022-09-04T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"F5FAFA","postit":"Someone missing a cat?!","img":"","likes":[],"createdAt" : "2022-09-10T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"6D929B","postit":"A new post from me!","img":"","likes":[],"createdAt" : "2022-09-10T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"F5FAFA","postit":"Someone missing a cat?!","img":"","likes":[],"createdAt" : "2022-09-10T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"6D929B","postit":"A new post from me!","img":"","likes":[],"createdAt" : "2022-09-04T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"F5FAFA","postit":"Someone missing a cat?!","img":"","likes":[],"createdAt" : "2022-09-10T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"6D929B","postit":"A new post from me!","img":"","likes":[],"createdAt" : "2022-09-10T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"F5FAFA","postit":"Someone missing a cat?!","img":"","likes":[],"createdAt" : "2022-09-10T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"6D929B","postit":"A new post from me!","img":"","likes":[],"createdAt" : "2022-09-04T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"F5FAFA","postit":"Someone missing a cat?!","img":"","likes":[],"createdAt" : "2022-09-10T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"6D929B","postit":"A new post from me!","img":"","likes":[],"createdAt" : "2022-09-10T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"},{"zipcode": "12345","bgColor":"F5FAFA","postit":"Someone missing a cat?!","img":"","likes":[],"createdAt" : "2022-09-10T02:35:06.410+0000","updatedAt" : "2022-09-10T02:35:06.410+0000"}] %> 
        <%# console.log(allPosts) %> 

        <% if (allPosts.length < 1  || allPosts === false){ %>
            <div class="mt-5 text-center">No Posts to show!</div>
        <%  } else { %>
            <% allPosts.forEach(post => { %>
                <% let bgcolor = "#" + post.bgColor %> 
                <div class="post_content"  style='background-color: <%=bgcolor%> '>
                    <img class="profileImg" src="/assets/user4.jpg" alt="profile picture">
                    <span class="username">Jimmy Johns</span>
                    <p class="postContent" id="post-cards" style="color:black">
                        <%= post.postit %>
                    </p>
                  
                    <div class="post-card_bottom d-flex justify-content-between px-2" >
                        <div class="post-date">
                            <img class="imgClock" src="./assets/clock.png" alt="clock for post date">
                            <span class="time_publish"><%= new Date(post.createdAt).toLocaleDateString() %></span>
                        
                        <div class="post-likes">
                            <form action="/like" method="post">
                                <button type="submit" name="like" value="<%=post._id %> " class="bg-transparent text-white">
                                    <img class="imgHeart" src="./assets/love.png" alt="hear for likes">
                                    <span class="likeCounter">10 Likes</span>
                                </button>
                            </form>
                            <span><%= post.likes %> </span>
                        </div>
                    </div>
                </div>
            </div>
                <% }) %> 
            <% } %> 
        
    </div>
</div>

    <%- include("partials/footer.ejs") %>